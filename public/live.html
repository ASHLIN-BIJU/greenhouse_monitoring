<!DOCTYPE html>
<html>
<head>
    <title>Live Sensor Test</title>
</head>
<body>
<h2>Live Sensor Data</h2>
<pre id="output">Waiting...</pre>

<script src="https://cdn.jsdelivr.net/npm/laravel-echo@1/dist/echo.iife.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pusher-js@8"></script>

<script>
window.Pusher = Pusher;

window.Echo = new Echo({
    broadcaster: 'reverb',
    key: 'local',
    wsHost: window.location.hostname,
    wsPort: 8080,
    forceTLS: false,
    disableStats: true,
});

const userId = 6; // change to your logged user id

Echo.channel('sensor.' + userId)
    .listen('SensorUpdated', (e) => {
        document.getElementById('output').innerText =
            JSON.stringify(e.data, null, 2);
    });
</script>
</body>
</html>
